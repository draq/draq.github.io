<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Calendar">
  <title>Calendar</title>
  <link rel="icon" href="favicon.png">
  <link rel="stylesheet" type="text/css" href="stylesheet.css">
  <script src="solar-coordinates.js"></script>
  <script src="sexagenary-cycle.js"></script>
</head>

<body>
  <header>
    <h1>Astronomical and Calendrical Notes</h1> 
  </header>
  <main>
    <section>
      <h2>Date and Time</h2>
      <table>
        <tbody>
          <tr>
            <td>Universal Time (UTC)</td>
            <td id="utc-datetime"></td>
          </tr>
          <tr>
            <td>Custom Date</td>
            <td><strong id="custom-date"></strong></td>
          </tr>
          <tr>
            <td>Julian Date (JD)</td>
            <td id="julian-date"></td>
          </tr>
        </tbody>
      </table>
    </section>
    <section>
      <h2>Solar Coordinates</h2>
      <table>
        <tbody>
          <tr>
            <td>Solar Ecliptic Longitude (&lambda;)</td>
            <td class="degree" id="solar-longitude"></td>
          </tr>
          <tr>
            <td>Solar Ecliptic Latitude (&beta;)</td>
            <td class="degree"  id="solar-latitude"></td>
          </tr>
          <tr>
            <td>Solar Distance (R)</td>
            <td id="solar-distance"></td>
          </tr>
          <tr>
            <td>Axial tilt (&epsilon;)</td>
            <td class="degree" id="axial-tilt"></td>
          </tr>
          <tr>
            <td>Right Ascension of the Sun (&alpha;)</td>
            <td><strong id="right-ascension"></strong></td>
          </tr>
          <tr>
            <td>Declination of the Sun (&delta;)</td>
            <td class="degree"><strong id="declination"></strong></td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>
  <footer>
    <p>Thanks to <a href="https://quasar.as.utexas.edu/BillInfo/JulianDatesG.html">Bill Jefferys</a></p> 
   </p>
  </footer>
  <script>
    const PLANETARY_SYMBOLS = [
      "☉", // Sun - Sunday
      "☾", // Moon - Monday
      "♂", // Mars - Tuesday
      "☿", // Mercuy - Wednesday
      "♃", // Jupiter - Thursday
      "♀", // Venus - Friday 	
      "♄", // Saturn - Saturday
    ]

    function getCustomDateString(date) {
      let weekday = date.getUTCDay();
      weekday = PLANETARY_SYMBOLS[weekday];
      date = date.toLocaleDateString("ar").replace(/\//g, "-");
      return  weekday + " " + date;
    }

    let now = new Date();
    document.getElementById("utc-datetime").textContent = now.toUTCString();
    document.getElementById("custom-date").textContent = getCustomDateString(now);

    now = calculateJulianDate(now);
    document.getElementById("julian-date").textContent = now.toFixed(4);

    let {longitude, latitude, distance} = calculateSolarEclipicCoordinates(now);
    document.getElementById("solar-longitude").textContent = longitude.toFixed(4);
    document.getElementById("solar-latitude").textContent = latitude;
    document.getElementById("solar-distance").textContent = `${distance.toFixed(4)}AU (${Math.round(distance * ASTRONOMICAL_UNIT / 1000)} km)`;

    let obliquity = calculateAxialTilt(now);
    document.getElementById("axial-tilt").textContent = obliquity.toFixed(4);

    let {rightAscension, declination} = calculateEquitorialCoordiantes(longitude, obliquity);
    let {degree, minute, second} = getHourMinuteSecond(rightAscension);
    document.getElementById("right-ascension").textContent = `${degree}h ${minute}m ${second.toFixed(0)}s`;
    document.getElementById("declination").textContent = declination.toFixed(4);
  </script>
</body>
</html>
